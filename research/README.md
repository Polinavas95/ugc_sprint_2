# Проектная работа 9 спринта. Исследование: выбор хранилища

Цель - выбрать хранилище по результатам исследования 
и тестирования работоспособности MongoDB и ClickHouse
в части вставки и чтении информации о:
* лайках/дизлайках за фильм;
* рецензии на фильм;
* закладок с фильмом.

Тестирование вставки с разными размерами батчей (от 1 до 5000).

#### Порядок проведения тестов
Прописать в консоли

```shell
make run test_mongo_db
```
или clickhouse
```shell
make run test_clickhouse_db
```


#### Результаты тестирования
1. MongoDB
### Запись лайков/дизлайков
| Размер Батча | Время записи на батч | Время записи 1 элемента |
|:------------:|:--------------------:|:-----------------------:|
|      1       |      0.013 сек       |        0.013 сек        |
|      10      |      0.052 сек       |        0.005 сек        |
|      50      |      0.202 сек       |        0.004 сек        |
|     100      |      0.337 сек       |       0.0033 сек        |
|     200      |      0.711 сек       |       0.0035 сек        |
|     500      |      1.721 сек       |       0.0034 сек        |
|     1000     |      3.641 сек       |       0.0036 сек        |
|     2000     |      7.023 сек       |       0.0035 сек        |
|     5000     |      23.775 сек      |       0.0047 сек        |

### Запись рецензии на фильм
| Размер Батча | Время записи на батч | Время записи 1 элемента |
|:------------:|:--------------------:|:-----------------------:|
|      1       |      0.0467 сек      |       0.0467 сек        |
|      10      |      0.096 сек       |       0.0096 сек        |
|      50      |      0.376 сек       |       0.0075 сек        |
|     100      |      0.535 сек       |       0.0053 сек        |
|     200      |      0.999 сек       |       0.0050 сек        |
|     500      |      3.114 сек       |       0.0062 сек        |
|     1000     |      5.287 сек       |       0.0053 сек        |
|     2000     |      10.755 сек      |       0.0054 сек        |
|     5000     |      26.474 сек      |       0.0053 сек        |

### Запись закладок
| Размер Батча | Время записи на батч | Время записи 1 элемента |
|:------------:|:--------------------:|:-----------------------:|
|      1       |      0.015 сек       |       0.0152 сек        |
|      10      |      0.068 сек       |       0.0068 сек        |
|      50      |      0.280 сек       |       0.0060 сек        |
|     100      |      0.513 сек       |       0.0051 сек        |
|     200      |      0.928 сек       |       0.0046 сек        |
|     500      |      2.351 сек       |       0.0047 сек        |
|     1000     |      4.912 сек       |       0.0049 сек        |
|     2000     |      10.183 сек      |       0.0051 сек        |
|     5000     |      25.459 сек      |       0.0051 сек        |



2. ClickHouse

#### Заключение
По результатам работоспособности было решено использовать ClickHouse в качестве хранилища данных.


## Авторы
[Polinavas95](https://github.com/Polinavas95) | <tatsuchan@mail.ru>

[Barahlush](https://github.com/Barahlush) | <baralti va@gmail.com>

